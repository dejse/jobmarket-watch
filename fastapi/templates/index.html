{% extends 'base.html' %}

{% block title %}Dashboard - Job Market Watch{% endblock %}

{% block content %}
<div class="card">
    <h2>Overview</h2>
    
    {% if latest_date %}
        <p style="margin-bottom: 1rem; color: #7f8c8d;">
            Latest data from: <strong>{{ latest_date }}</strong>
        </p>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3>{{ total_jobs }}</h3>
                <p>Total Jobs Available</p>
            </div>
            <div class="stat-card">
                <h3>{{ cities|length }}</h3>
                <p>Cities Tracked</p>
            </div>
        </div>
    {% else %}
        <div class="no-data">
            <p>No data available. Please import CSV data using:</p>
            <code>python import_csv.py --file ../data/data.csv</code>
        </div>
    {% endif %}
</div>

{% if cities %}
<div class="card">
    <h2>Current Job Counts by City</h2>
    <ul class="city-list">
        {% for city in cities %}
        <li class="city-item">
            <a href="/city/{{ city.location }}" class="city-name">
                {{ city.location }}
            </a>
            <span class="city-count">{{ city.job_count }}</span>
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}

{% if latest_bar_chart %}
<div class="card">
    <h2>Visual Overview</h2>
    <div class="chart-container">
        {{ latest_bar_chart|safe }}
    </div>
</div>
{% endif %}

{% if time_series_chart %}
<div class="card">
    <h2>Trends Over Time</h2>
    <div class="chart-container">
        {{ time_series_chart|safe }}
    </div>
</div>
{% endif %}

{% endblock %}
